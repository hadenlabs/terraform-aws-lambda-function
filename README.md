<!--


  ** DO NOT EDIT THIS FILE
  **
  ** 1) Make all changes to `provision/generator/README.yaml`
  ** 2) Run`task readme` to rebuild this file.
  **
  ** (We maintain HUNDREDS of open source projects. This is how we maintain our sanity.)
  **


  -->

[![Latest Release](https://img.shields.io/github/release/hadenlabs/terraform-aws-lambda-function)](https://github.com/hadenlabs/terraform-aws-lambda-function/releases) [![Lint](https://img.shields.io/github/workflow/status/hadenlabs/terraform-aws-lambda-function/lint-code)](https://github.com/hadenlabs/terraform-aws-lambda-function/actions?workflow=lint-code) [![CI](https://img.shields.io/github/workflow/status/hadenlabs/terraform-aws-lambda-function/ci)](https://github.com/hadenlabs/terraform-aws-lambda-function/actions?workflow=ci) [![Test](https://img.shields.io/github/workflow/status/hadenlabs/terraform-aws-lambda-function/test)](https://github.com/hadenlabs/terraform-aws-lambda-function/actions?workflow=test) [![pre-commit](https://img.shields.io/badge/pre--commit-enabled-brightgreen?logo=pre-commit&logoColor=white)](https://github.com/pre-commit/pre-commit) [![Conventional Commits](https://img.shields.io/badge/Conventional%20Commits-1.0.0-yellow)](https://conventionalcommits.org) [![KeepAChangelog](https://img.shields.io/badge/changelog-Keep%20a%20Changelog%20v1.0.0-orange)](https://keepachangelog.com) [![Terraform Version](https://img.shields.io/badge/terraform-1.x%20|%200.15%20|%200.14%20|%200.13%20|%200.12.20+-623CE4.svg?logo=terraform)](https://github.com/hashicorp/terraform/releases)

# terraform-aws-lambda-function

terraform-aws-lambda-function for project

## Requirements

This is a list of plugins that need to be installed previously to enjoy all the goodies of this configuration:

- [gomplate](https://github.com/hairyhenderson/gomplate)
- [terraform](https://github.com/hashicorp/terraform)
- [taskfile](https://github.com/go-task/task)

## Usage

# How to use this project

```hcl
module "main" {
  source  = "hadenlabs/terraform-aws-lambda-function/aws"
  version = "0.0.0"
}
```

Full working examples can be found in [examples](./examples) folder.

## Examples

<!-- Space: Projects -->
<!-- Parent: TerraformAwsLambdaFunction -->
<!-- Title: Examples TerraformAwsLambdaFunction -->
<!-- Label: Examples -->
<!-- Include: ./../disclaimer.md -->
<!-- Include: ac:toc -->

### common

```hcl
module "main" {
  source  = "hadenlabs/terraform-aws-lambda-function/aws"
  version = "0.0.0"
}
```

 <!-- markdown-link-check-disable -->
<!-- BEGIN_TF_DOCS -->

## Requirements

| Name                                                                     | Version           |
| ------------------------------------------------------------------------ | ----------------- |
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | >= 0.12.20, < 2.0 |
| <a name="requirement_aws"></a> [aws](#requirement_aws)                   | >= 2.51, < 4.0    |
| <a name="requirement_null"></a> [null](#requirement_null)                | >=0.1.0           |

## Providers

| Name                                             | Version        |
| ------------------------------------------------ | -------------- |
| <a name="provider_aws"></a> [aws](#provider_aws) | >= 2.51, < 4.0 |

## Modules

| Name                                               | Source              | Version |
| -------------------------------------------------- | ------------------- | ------- |
| <a name="module_label"></a> [label](#module_label) | hadenlabs/tags/null | >=0.2   |

## Resources

| Name | Type |
| --- | --- |
| [aws_lambda_alias.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lambda_alias) | resource |
| [aws_lambda_function.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lambda_function) | resource |
| [aws_lambda_permission.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lambda_permission) | resource |
| [aws_caller_identity.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/caller_identity) | data source |
| [aws_region.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/region) | data source |

## Inputs

| Name | Description | Type | Default | Required |
| --- | --- | --- | --- | :-: |
| <a name="input_aliases"></a> [aliases](#input_aliases) | (Optional) A map of aliases (keyed by the alias name) that will be created for the Lambda function. If 'version' is omitted, the alias will automatically point to '$LATEST'. | `any` | `{}` | no |
| <a name="input_dead_letter_config_target_arn"></a> [dead_letter_config_target_arn](#input_dead_letter_config_target_arn) | (Optional) The ARN of an SNS topic or SQS queue to notify when an invocation fails. If this option is used, the function's IAM role must be granted suitable access to write to the target object, which means allowing either the sns:Publish or sqs:SendMessage action on this ARN, depending on which service is targeted. | `string` | `""` | no |
| <a name="input_description"></a> [description](#input_description) | (Optional) A description of what the Lambda function does. | `string` | `null` | no |
| <a name="input_enabled"></a> [enabled](#input_enabled) | Set to false to prevent the module from creating any resources | `bool` | `true` | no |
| <a name="input_environment_variables"></a> [environment_variables](#input_environment_variables) | (Optional) A map of environment variables to pass to the Lambda function. AWS will automatically encrypt these with KMS if a key is provided and decrypt them when running the function. | `map(string)` | `{}` | no |
| <a name="input_filename"></a> [filename](#input_filename) | (Optional) The path to the .zip file that contains the Lambda function source code. | `string` | `null` | no |
| <a name="input_function_name"></a> [function_name](#input_function_name) | (Required) A unique name for the Lambda function. | `string` | n/a | yes |
| <a name="input_handler"></a> [handler](#input_handler) | (Required) The function entrypoint in the code. This is the name of the method in the code which receives the event and context parameter when this Lambda function is triggered. | `string` | n/a | yes |
| <a name="input_kms_key_arn"></a> [kms_key_arn](#input_kms_key_arn) | (Optional) The ARN for the KMS encryption key that is used to encrypt environment variables. If none is provided when environment variables are in use, AWS Lambda uses a default service key. | `string` | `null` | no |
| <a name="input_layer_arns"></a> [layer_arns](#input_layer_arns) | (Optional) Set of Lambda Layer Version ARNs (maximum of 5) to attach to your Lambda Function. For details see https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html | `set(string)` | `[]` | no |
| <a name="input_memory_size"></a> [memory_size](#input_memory_size) | (Optional) Amount of memory in MB the Lambda function can use at runtime. For details see https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html | `number` | `128` | no |
| <a name="input_namespace"></a> [namespace](#input_namespace) | The namespace of project | `string` | n/a | yes |
| <a name="input_permissions"></a> [permissions](#input_permissions) | (Optional) A list of permission objects of external resources (like a CloudWatch Event Rule, SNS, or S3) that should have permission to access the Lambda function. | `any` | `[]` | no |
| <a name="input_publish"></a> [publish](#input_publish) | (Optional) Whether to publish creation/change as new Lambda function. This allows you to use aliases to refer to execute different versions of the function in different environments. | `bool` | `false` | no |
| <a name="input_reserved_concurrent_executions"></a> [reserved_concurrent_executions](#input_reserved_concurrent_executions) | (Optional) The amount of reserved concurrent executions for this lambda function. A value of 0 disables lambda from being triggered and -1 removes any concurrency limitations. For details see https://docs.aws.amazon.com/lambda/latest/dg/invocation-scaling.html | `number` | `-1` | no |
| <a name="input_role_arn"></a> [role_arn](#input_role_arn) | (Optional) The ARN of the policy that is used to set the permissions boundary for the IAM role for the Lambda function. | `string` | `null` | no |
| <a name="input_runtime"></a> [runtime](#input_runtime) | (Required) The runtime the Lambda function should run in. A list of all available runtimes can be found here: https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html | `string` | n/a | yes |
| <a name="input_s3_bucket"></a> [s3_bucket](#input_s3_bucket) | (Optional) The S3 bucket location containing the function's deployment package. Conflicts with 'filename'. This bucket must reside in the same AWS region where you are creating the Lambda function. | `string` | `null` | no |
| <a name="input_s3_key"></a> [s3_key](#input_s3_key) | (Optional) The S3 key of an object containing the function's deployment package. Conflicts with 'filename'. | `string` | `null` | no |
| <a name="input_s3_object_version"></a> [s3_object_version](#input_s3_object_version) | (Optional) The object version containing the function's deployment package. Conflicts with 'filename'. | `string` | `null` | no |
| <a name="input_source_code_hash"></a> [source_code_hash](#input_source_code_hash) | (Optional) Used to trigger updates. Must be set to a base64-encoded SHA256 hash of the package file specified with either filename or s3_key. | `string` | `null` | no |
| <a name="input_stage"></a> [stage](#input_stage) | The name of stage (dev,staging,prod) | `string` | n/a | yes |
| <a name="input_tags"></a> [tags](#input_tags) | The tags for add resources | `map(any)` | `{}` | no |
| <a name="input_timeout"></a> [timeout](#input_timeout) | (Optional) The amount of time the Lambda function has to run in seconds. For details see https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html | `number` | `3` | no |
| <a name="input_tracing_mode"></a> [tracing_mode](#input_tracing_mode) | (Optional) Can be either 'PassThrough' or 'Active'. If set to 'PassThrough', Lambda will only trace the request from an upstream service if it contains a tracing header with 'sampled=1'. If set to 'Active', Lambda will respect any tracing header it receives from an upstream service. If no tracing header is received, Lambda will call X-Ray for a tracing decision. | `string` | `null` | no |
| <a name="input_use_fullname"></a> [use_fullname](#input_use_fullname) | If set to 'true' then the full ID for the IAM user name (e.g. `[var.namespace]-[var.stage]-[var.name]`) will be used. | `bool` | `false` | no |
| <a name="input_vpc_security_group_ids"></a> [vpc_security_group_ids](#input_vpc_security_group_ids) | (Optional) A set of security group IDs associated with the Lambda function. | `set(string)` | `[]` | no |
| <a name="input_vpc_subnet_ids"></a> [vpc_subnet_ids](#input_vpc_subnet_ids) | (Optional) A set of subnet IDs associated with the Lambda function. | `set(string)` | `[]` | no |

## Outputs

| Name | Description |
| --- | --- |
| <a name="output_aliases"></a> [aliases](#output_aliases) | A map of all created 'aws_lambda_alias' resources keyed by name. |
| <a name="output_enabled"></a> [enabled](#output_enabled) | Whether the module is enabled. |
| <a name="output_function"></a> [function](#output_function) | All outputs of the 'aws_lambda_function' resource. |
| <a name="output_function_name"></a> [function_name](#output_function_name) | function name of lambda. |
| <a name="output_guessed_function_arn"></a> [guessed_function_arn](#output_guessed_function_arn) | Guessed function arn in the format: arn:aws:lambda:<region>:<account_id>:function:<function_name> |
| <a name="output_instance"></a> [instance](#output_instance) | output instance repository |
| <a name="output_invoke_arn"></a> [invoke_arn](#output_invoke_arn) | Invoke ARN of function lambda |
| <a name="output_lambda_arn"></a> [lambda_arn](#output_lambda_arn) | ARN of function lambda |
| <a name="output_module_inputs"></a> [module_inputs](#output_module_inputs) | A map of all module arguments. Omitted optional arguments will be represented with their actual defaults. |
| <a name="output_permissions"></a> [permissions](#output_permissions) | A map of all created 'aws_lambda_permission' resources keyed by statement_id. |
| <a name="output_tags"></a> [tags](#output_tags) | The map of tags that will be applied to all created resources that accept tags. |
| <a name="output_use_fullname"></a> [use_fullname](#output_use_fullname) | fullname module. |

<!-- END_TF_DOCS -->
<!-- markdown-link-check-enable -->

## Help

**Got a question?**

File a GitHub [issue](https://github.com/hadenlabs/terraform-aws-lambda-function/issues).

## Contributing

See [Contributing](./docs/contributing.md).

## Module Versioning

This Module follows the principles of [Semantic Versioning (SemVer)](https://semver.org/).

Using the given version number of `MAJOR.MINOR.PATCH`, we apply the following constructs:

1. Use the `MAJOR` version for incompatible changes.
1. Use the `MINOR` version when adding functionality in a backwards compatible manner.
1. Use the `PATCH` version when introducing backwards compatible bug fixes.

### Backwards compatibility in `0.0.z` and `0.y.z` version

- In the context of initial development, backwards compatibility in versions `0.0.z` is **not guaranteed** when `z` is increased. (Initial development)
- In the context of pre-release, backwards compatibility in versions `0.y.z` is **not guaranteed** when `y` is increased. (Pre-release)

## Copyright

Copyright © 2018-2022 [Hadenlabs](https://hadenlabs.com)

## Trademarks

All other trademarks referenced herein are the property of their respective owners.

## License

The code and styles are licensed under the LGPL-3.0 license [See project license.](LICENSE).

## Don't forget to 🌟 Star 🌟 the repo if you like terraform-aws-lambda-function

[Your feedback is appreciated](https://github.com/hadenlabs/terraform-aws-lambda-function/issues)
